class t extends Array{constructor(t=1,e=0){super(),this.x=t,this.y=e}set x(t){this[0]=t}set y(t){this[1]=t}get x(){return this[0]}get y(){return this[1]}get length(){return Math.hypot(this.x,this.y)}get dir(){return Math.atan2(this.y,this.x)}copy(){return new t(this.x,this.y)}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}scale(t){return this.x*=t,this.y*=t,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),[i,s]=this;return this.x=i*e+s*-r,this.y=i*r+s*e,this}cross(t){return this.x*t.y-t.x*this.y}dot(t){return this.x*t.x+t.y*this.y}normalize(){return this.scale(1/this.length)}}function e(e,r){return new t(e.x+r.x,e.y+r.y)}function r(e,r){return new t(e.x-r.x,e.y-r.y)}class i{constructor(t){this.instructArray=[]}static install(t){this.mot=t,t.register("createPath",(t=>new i(t)))}quadraticBezierCurve(){}bezier2P(t,e,r,i){return t*Math.pow(1-i,2)+2*e*i*(1-i)+r*i*i}getBezierNowPoint2P(t,e,r,i,s){return{x:this.bezier2P(t.x,e.x,r.x,i*s),y:this.bezier2P(t.y,e.y,r.y,i*s)}}create2PBezier(t,e,r,i=100,s=1){const n=s/(i-1),o=[];for(let s=0;s<i;s++){const i=this.getBezierNowPoint2P(t,e,r,s,n);o.push({x:i.x,y:i.y})}return o}bezier3P(t,e,r,i,s){return t*Math.pow(1-s,3)+3*e*s*Math.pow(1-s,2)+3*r*Math.pow(s,2)*(1-s)+i*Math.pow(s,3)}getBezierNowPoint3P(t,e,r,i,s,n){return{x:this.bezier3P(t.x,e.x,r.x,i.x,s*n),y:this.bezier3P(t.y,e.y,r.y,i.y,s*n)}}create3PBezier(t,e,r,i,s=100,n=1){const o=s,h=n/(o-1),a=[];for(let s=0;s<o;s++){const n=this.getBezierNowPoint3P(t,e,r,i,s,h);a.push({x:n.x,y:n.y})}return a}createSmoothLine(e,r=.3){const i=e.length;let s=[];const n=[];if(!(i<3)){for(let o=0;o<i-2;o++){const{control1:h,control2:a}=this.createSmoothLineControlPoint(new t(e[o].x,e[o].y),new t(e[o+1].x,e[o+1].y),new t(e[o+2].x,e[o+2].y),r);let c,y;n.push(h),n.push(a),0===o?c=this.create2PBezier(e[o],h,e[o+1],50):(console.log(n),c=this.create3PBezier(e[o],n[2*o-1],h,e[o+1],50)),o+2===i-1&&(y=this.create2PBezier(e[o+1],a,e[o+2],50)),s=o+2===i-1?[...s,...c,...y]:[...s,...c]}return s}}createSmoothLineControlPoint(t,i,s,n=.3){const o=r(t,i),h=r(t,i),a=o.length/h.length;let c;c=a>1?r(t,e(i,r(s,i).scale(1/a))):r(e(i,r(t,i).scale(a)),s),c=c.scale(n);return{control1:{x:e(i,c).x,y:e(i,c).y},control2:{x:r(i,c).x,y:r(i,c).y}}}}i.pluginName="mot-plugin-path",i.installed=!1,window.motPluginPath&&console.warn("'motPluginPath' had been used,and it will be covered"),window.motPluginPath=i;export default i;
